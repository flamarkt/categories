{"version":3,"file":"backoffice.js","mappings":"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","sources":["webpack://@flamarkt/categories/webpack/bootstrap","webpack://@flamarkt/categories/webpack/runtime/compat get default export","webpack://@flamarkt/categories/webpack/runtime/define property getters","webpack://@flamarkt/categories/webpack/runtime/hasOwnProperty shorthand","webpack://@flamarkt/categories/webpack/runtime/make namespace object","webpack://@flamarkt/categories/external root \"((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['app']\"","webpack://@flamarkt/categories/external root \"flarum.core.compat['common/extend']\"","webpack://@flamarkt/categories/external root \"((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/BackofficeNav']\"","webpack://@flamarkt/categories/external root \"((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['components/ActiveLinkButton']\"","webpack://@flamarkt/categories/external root \"flarum.core.compat['common/Model']\"","webpack://@flamarkt/categories/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@flamarkt/categories/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flamarkt/categories/./src/common/models/Category.ts","webpack://@flamarkt/categories/./src/common/compat.ts","webpack://@flamarkt/categories/./src/common/utils/sortCategories.ts","webpack://@flamarkt/categories/external root \"((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/AbstractList']\"","webpack://@flamarkt/categories/external root \"flarum.core.compat['common/components/Link']\"","webpack://@flamarkt/categories/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@flamarkt/categories/./src/backoffice/components/CategoryList.ts","webpack://@flamarkt/categories/external root \"((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['components/AbstractRelationshipSelect']\"","webpack://@flamarkt/categories/external root \"flarum.core.compat['common/helpers/highlight']\"","webpack://@flamarkt/categories/./src/backoffice/components/CategoryRelationshipSelect.ts","webpack://@flamarkt/categories/external root \"flarum.core.compat['common/components/Page']\"","webpack://@flamarkt/categories/external root \"((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['states/AbstractListState']\"","webpack://@flamarkt/categories/./src/backoffice/states/CategoryListState.ts","webpack://@flamarkt/categories/./src/backoffice/pages/CategoryIndexPage.ts","webpack://@flamarkt/categories/external root \"((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['pages/AbstractShowPage']\"","webpack://@flamarkt/categories/external root \"((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/SubmitButton']\"","webpack://@flamarkt/categories/external root \"((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/SoftDeleteButton']\"","webpack://@flamarkt/categories/external root \"((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/PermanentDeleteButton']\"","webpack://@flamarkt/categories/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@flamarkt/categories/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@flamarkt/categories/./src/backoffice/pages/CategoryShowPage.ts","webpack://@flamarkt/categories/./src/backoffice/compat.ts","webpack://@flamarkt/categories/external root \"((flarum.extensions['flamarkt-core']||{})['backoffice']||{})['components/ProductList']\"","webpack://@flamarkt/categories/external root \"((flarum.extensions['flamarkt-core']||{})['backoffice']||{})['pages/ProductShowPage']\"","webpack://@flamarkt/categories/./src/backoffice/index.ts","webpack://@flamarkt/categories/./src/backoffice/extendProductIndex.ts","webpack://@flamarkt/categories/./src/backoffice/extendProductShow.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/BackofficeNav'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['components/ActiveLinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import Model from 'flarum/common/Model';\n\nexport default class Category extends Model {\n    slug = Model.attribute<string>('slug');\n    title = Model.attribute<string>('title');\n    description = Model.attribute<string>('description');\n    priority = Model.attribute<number>('priority');\n    productCount = Model.attribute<number>('productCount');\n    isRoot = Model.attribute<boolean>('isRoot');\n    isHidden = Model.attribute<boolean>('isHidden');\n\n    parent = Model.hasOne<Category>('parent');\n\n    apiEndpoint() {\n        return '/flamarkt/categories' + (this.exists ? '/' + (this.data as any).id : '');\n    }\n}\n","import Category from './models/Category';\nimport sortCategories from './utils/sortCategories';\n\nexport const common = {\n    'models/Category': Category,\n    'utils/sortCategories': sortCategories,\n}\n","import Category from '../models/Category';\n\n/**\n * Sort a list of categories according to the built-in rules:\n * Priority, then alphabetical order\n * This method is only intended to filter one level of categories at a time\n * @param categories\n */\nexport default function sortCategories(categories: Category[]) {\n    return categories.slice(0).sort((a, b) => {\n        const aPriority = a.priority();\n        const bPriority = b.priority();\n\n        if (aPriority > bPriority) {\n            return -1;\n        }\n\n        if (bPriority > aPriority) {\n            return 1;\n        }\n\n        return a.title() > b.title() ? 1 : -1;\n    });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/AbstractList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","import app from 'flamarkt/backoffice/backoffice/app';\nimport AbstractList from 'flamarkt/backoffice/backoffice/components/AbstractList';\nimport Link from 'flarum/common/components/Link';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport Category from '../../common/models/Category';\n\nexport default class CategoryList extends AbstractList<Category> {\n    head() {\n        const columns = super.head();\n\n        columns.add('parent', m('th', 'Parent'));\n        columns.add('title', m('th', 'Title'));//TODO\n        columns.add('productCount', m('th', 'Products'));\n\n        return columns;\n    }\n\n    columns(category: Category) {\n        const columns = super.columns(category);\n\n        const parent = category.parent();\n\n        columns.add('parent', m('td', parent ? m(Link, {\n            href: app.route('categories.show', {\n                id: parent.id(),\n            }),\n        }, parent.title()) : m('em', 'Root')));\n        columns.add('title', m('td', category.title()));\n        columns.add('productCount', m('td', category.productCount()));\n\n        return columns;\n    }\n\n    actions(category: Category) {\n        const actions = super.actions(category);\n\n        actions.add('edit', LinkButton.component({\n            className: 'Button Button--icon',\n            icon: 'fas fa-pen',\n            href: app.route('categories.show', {\n                id: category.id(),\n            }),\n        }));\n\n        return actions;\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['components/AbstractRelationshipSelect'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/highlight'];","import app from 'flamarkt/backoffice/backoffice/app';\nimport AbstractRelationshipSelect from 'flamarkt/backoffice/common/components/AbstractRelationshipSelect';\nimport highlight from 'flarum/common/helpers/highlight';\nimport Category from '../../common/models/Category';\n\nexport default class CategoryRelationshipSelect extends AbstractRelationshipSelect<Category> {\n    protected resultsCache = new Map<string, Category[]>();\n\n    search(query: string) {\n        if (!query) {\n            m.redraw();\n            return Promise.resolve();\n        }\n\n        query = query.toLowerCase();\n\n        return app.store\n            .find<Category[]>('flamarkt/categories', {\n                filter: {q: query},\n                page: {limit: 5},\n            })\n            .then((results) => {\n                this.resultsCache.set(query, results);\n                m.redraw();\n            });\n    }\n\n    results(query: string) {\n        if (!query) {\n            return [];\n        }\n\n        query = query.toLowerCase();\n\n        const results = this.resultsCache.get(query);\n\n        // Indicates still loading\n        if (typeof results === 'undefined') {\n            return null;\n        }\n\n        return results || [];\n    }\n\n    item(category: Category, query?: string) {\n        return [\n            query ? highlight(category.title(), query) : category.title(),\n        ];\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['states/AbstractListState'];","import AbstractListState from 'flamarkt/backoffice/common/states/AbstractListState';\nimport Category from '../../common/models/Category';\n\nexport default class CategoryListState extends AbstractListState<Category> {\n    type() {\n        return 'flamarkt/categories';\n    }\n}\n","import {Vnode} from 'mithril';\nimport app from 'flamarkt/backoffice/backoffice/app';\nimport Page from 'flarum/common/components/Page';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport CategoryListState from '../states/CategoryListState';\nimport CategoryList from '../components/CategoryList';\n\nexport default class CategoryIndexPage extends Page {\n    list!: CategoryListState;\n\n    oninit(vnode: Vnode) {\n        super.oninit(vnode);\n\n        this.list = new CategoryListState();\n        this.list.refresh();\n    }\n\n    view() {\n        return m('.ProductIndexPage', m('.container', [\n            m('.Form-group', [\n                LinkButton.component({\n                    className: 'Button',\n                    href: app.route('categories.show', {\n                        id: 'new',\n                    }),\n                }, 'New category' /* TODO */),\n            ]),\n            m(CategoryList, {\n                list: this.list,\n            }),\n        ]));\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['pages/AbstractShowPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/SubmitButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/SoftDeleteButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/PermanentDeleteButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","import {Children} from 'mithril';\nimport app from 'flamarkt/backoffice/backoffice/app';\nimport AbstractShowPage from 'flamarkt/backoffice/common/pages/AbstractShowPage';\nimport SubmitButton from 'flamarkt/backoffice/backoffice/components/SubmitButton';\nimport SoftDeleteButton from 'flamarkt/backoffice/backoffice/components/SoftDeleteButton';\nimport PermanentDeleteButton from 'flamarkt/backoffice/backoffice/components/PermanentDeleteButton';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Category from '../../common/models/Category';\nimport CategoryRelationshipSelect from '../components/CategoryRelationshipSelect';\n\nexport default class CategoryShowPage extends AbstractShowPage {\n    category: Category | null = null;\n    saving: boolean = false;\n    dirty: boolean = false;\n    parent: Category | null = null;\n    slug: string = '';\n    title: string = '';\n    description: string = '';\n    priority: string = '';\n\n    newRecord() {\n        return app.store.createRecord('flamarkt-categories');\n    }\n\n    findType() {\n        return 'flamarkt/categories';\n    }\n\n    show(category: Category) {\n        this.category = category;\n        this.parent = category.parent() || null;\n        this.slug = category.slug() || '';\n        this.title = category.title() || '';\n        this.description = category.description() || '';\n        this.priority = category.priority() + '';\n\n        app.setTitle(category.title());\n        app.setTitleCount(0);\n    }\n\n    view() {\n        if (!this.category) {\n            return LoadingIndicator.component();\n        }\n\n        return m('form.CategoryShowPage', {\n            onsubmit: this.onsubmit.bind(this),\n        }, m('.container.container--narrow', this.fields().toArray()));\n    }\n\n    fields(): ItemList<Children> {\n        const fields = new ItemList<Children>();\n\n        fields.add('parent', m('.Form-group', [\n            m('label', 'Parent'),\n            m(CategoryRelationshipSelect, {\n                relationship: this.parent,\n                onchange: (category: Category) => {\n                    this.parent = category;\n                    this.dirty = true;\n                },\n                hasOne: true,\n            }),\n        ]), 100);\n\n        fields.add('slug', m('.Form-group', [\n            m('label', 'Slug'),\n            m('input.FormControl', {\n                type: 'text',\n                value: this.slug,\n                oninput: (event: Event) => {\n                    this.slug = (event.target as HTMLInputElement).value;\n                    this.dirty = true;\n                },\n            }),\n        ]), 80);\n\n        fields.add('title', m('.Form-group', [\n            m('label', 'Title'),\n            m('input.FormControl', {\n                type: 'text',\n                value: this.title,\n                oninput: (event: Event) => {\n                    this.title = (event.target as HTMLInputElement).value;\n                    this.dirty = true;\n                },\n            }),\n        ]), 60);\n\n        fields.add('description', m('.Form-group', [\n            m('label', 'Description'),\n            m('textarea.FormControl', {\n                value: this.description,\n                oninput: (event: Event) => {\n                    this.description = (event.target as HTMLInputElement).value;\n                    this.dirty = true;\n                },\n            }),\n        ]), 40);\n\n        fields.add('priority', m('.Form-group', [\n            m('label', 'Priority'),\n            m('input.FormControl', {\n                type: 'number',\n                min: 0,\n                value: this.priority,\n                oninput: (event: Event) => {\n                    this.priority = (event.target as HTMLInputElement).value;\n                    this.dirty = true;\n                },\n            }),\n        ]), 20);\n\n        fields.add('submit', m('.Form-group', [\n            SubmitButton.component({\n                loading: this.saving,\n                dirty: this.dirty,\n                exists: this.category!.exists,\n            }),\n            ' ',\n            SoftDeleteButton.component({\n                model: this.category,\n            }),\n            ' ',\n            PermanentDeleteButton.component({\n                model: this.category,\n                afterdelete() {\n                    m.route.set(app.route('categories.index'));\n                },\n            }),\n        ]), -10);\n\n        return fields;\n    }\n\n    data() {\n        return {\n            slug: this.slug,\n            title: this.title,\n            description: this.description,\n            priority: parseInt(this.priority),\n            relationships: {\n                parent: this.parent,\n            },\n        };\n    }\n\n    onsubmit(event: Event) {\n        event.preventDefault();\n\n        this.saving = true;\n\n        this.category!.save(this.data()).then(category => {\n            this.category = category;\n\n            this.saving = false;\n            this.dirty = false;\n            m.redraw();\n\n            m.route.set(app.route.category(category));\n        }).catch(error => {\n            this.saving = false;\n            m.redraw();\n        });\n    }\n}\n","import CategoryList from './components/CategoryList';\nimport CategoryRelationshipSelect from './components/CategoryRelationshipSelect';\nimport CategoryIndexPage from './pages/CategoryIndexPage';\nimport CategoryShowPage from './pages/CategoryShowPage';\nimport CategoryListState from './states/CategoryListState';\n\nexport const backoffice = {\n    'components/CategoryList': CategoryList,\n    'components/CategoryRelationshipSelect': CategoryRelationshipSelect,\n    'pages/CategoryIndexPage': CategoryIndexPage,\n    'pages/CategoryShowPage': CategoryShowPage,\n    'states/CategoryListState': CategoryListState,\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-core']||{})['backoffice']||{})['components/ProductList'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-core']||{})['backoffice']||{})['pages/ProductShowPage'];","import app from 'flamarkt/backoffice/backoffice/app';\nimport {extend} from 'flarum/common/extend';\nimport BackofficeNav from 'flamarkt/backoffice/backoffice/components/BackofficeNav';\nimport ActiveLinkButton from 'flamarkt/backoffice/common/components/ActiveLinkButton';\nimport Model from 'flarum/common/Model';\nimport {common} from '../common/compat';\nimport {backoffice} from './compat';\nimport Category from '../common/models/Category';\nimport CategoryIndexPage from './pages/CategoryIndexPage';\nimport CategoryShowPage from './pages/CategoryShowPage';\nimport extendProductIndex from './extendProductIndex';\nimport extendProductShow from './extendProductShow';\n\nexport {\n    common,\n    backoffice,\n};\n\napp.initializers.add('flamarkt-categories', () => {\n    app.extensionData.for('flamarkt-categories')\n        .registerSetting({\n            setting: 'flamarkt-categories.listInSideNav',\n            type: 'switch',\n            label: app.translator.trans('flamarkt-categories.backoffice.settings.listInSideNav'),\n        })\n        .registerSetting({\n            setting: 'flamarkt-categories.indexInSideNav',\n            type: 'switch',\n            label: app.translator.trans('flamarkt-categories.backoffice.settings.indexInSideNav'),\n        })\n        .registerSetting({\n            setting: 'flamarkt-categories.indexInBreadcrumb',\n            type: 'switch',\n            label: app.translator.trans('flamarkt-categories.backoffice.settings.indexInBreadcrumb'),\n        });\n\n    app.store.models['flamarkt-categories'] = Category;\n    app.store.models['flamarkt-products'].prototype.categories = Model.hasMany('categories');\n\n    app.routes['categories.index'] = {\n        path: '/categories',\n        component: CategoryIndexPage,\n    };\n    app.routes['categories.show'] = {\n        path: '/categories/:id',\n        component: CategoryShowPage,\n    };\n\n    app.route.category = category => {\n        return app.route('categories.show', {\n            id: category.id(),\n        });\n    };\n\n    extend(BackofficeNav.prototype, 'items', function (items) {\n        items.add('categories', ActiveLinkButton.component({\n            href: app.route('categories.index'),\n            icon: 'fas fa-th-list',\n            activeRoutes: [\n                'categories.*',\n            ],\n        }, app.translator.trans('flamarkt-categories.backoffice.nav.categories')));\n    });\n\n    extendProductIndex();\n    extendProductShow();\n});\n","import app from 'flamarkt/backoffice/backoffice/app';\nimport {extend} from 'flarum/common/extend';\nimport ProductList from 'flamarkt/core/backoffice/components/ProductList';\n\nexport default function () {\n    extend(ProductList.prototype, 'head', function (columns) {\n        columns.add('categories', m('th', app.translator.trans('flamarkt-categories.backoffice.products.head.category')), 20);\n    });\n\n    extend(ProductList.prototype, 'columns', function (columns, product) {\n        columns.add('categories', m('td', (product.categories() || []).map(category => category.title()).join(', ')), 20);\n    });\n}\n","import {extend} from 'flarum/common/extend';\nimport ProductShowPage from 'flamarkt/core/backoffice/pages/ProductShowPage';\nimport CategoryRelationshipSelect from './components/CategoryRelationshipSelect';\n\nexport default function () {\n    extend(ProductShowPage.prototype, 'oninit', function (this: ProductShowPage) {\n        this.categories = [];\n    });\n\n    extend(ProductShowPage.prototype, 'show', function (this: ProductShowPage, returnValue: any, product) {\n        this.categories = product.categories() || [];\n    });\n\n    extend(ProductShowPage.prototype, 'fields', function (this: ProductShowPage, fields) {\n        fields.add('categories', m('.Form-group', [\n            m('label', 'Categories'),\n            m(CategoryRelationshipSelect, {\n                relationship: this.categories,\n                onchange: categories => {\n                    this.categories = categories;\n                    this.dirty = true;\n                },\n            }),\n        ]), 100);\n    });\n\n    extend(ProductShowPage.prototype, 'data', function (this: ProductShowPage, data: any) {\n        data.relationships = data.relationships || {};\n        data.relationships.categories = this.categories;\n    });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","extensions","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","Category","slug","Model","title","description","priority","productCount","isRoot","isHidden","parent","apiEndpoint","this","exists","data","id","common","categories","slice","sort","b","aPriority","bPriority","CategoryList","head","columns","add","m","category","Link","href","app","actions","LinkButton","className","icon","AbstractList","CategoryRelationshipSelect","resultsCache","Map","search","query","toLowerCase","filter","q","page","limit","then","results","set","redraw","Promise","resolve","item","highlight","AbstractRelationshipSelect","CategoryListState","type","AbstractListState","CategoryIndexPage","list","oninit","vnode","refresh","view","Page","CategoryShowPage","saving","dirty","newRecord","findType","show","onsubmit","fields","toArray","LoadingIndicator","ItemList","relationship","onchange","hasOne","oninput","event","target","min","SubmitButton","loading","SoftDeleteButton","model","PermanentDeleteButton","afterdelete","route","parseInt","relationships","preventDefault","save","error","AbstractShowPage","backoffice","registerSetting","setting","label","path","component","extend","BackofficeNav","items","ActiveLinkButton","activeRoutes","ProductList","product","map","join","ProductShowPage","returnValue"],"sourceRoot":""}