{"version":3,"sources":["webpack://@flamarkt/categories/webpack/bootstrap","webpack://@flamarkt/categories/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@flamarkt/categories/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flamarkt/categories/external \"flarum.core.compat['common/Model']\"","webpack://@flamarkt/categories/external \"flarum.core.compat['common/extend']\"","webpack://@flamarkt/categories/external \"flarum.core.compat['common/components/LinkButton']\"","webpack://@flamarkt/categories/./src/common/models/Category.ts","webpack://@flamarkt/categories/external \"flarum.core.compat['common/components/Page']\"","webpack://@flamarkt/categories/external \"flarum.core.compat['common/components/Link']\"","webpack://@flamarkt/categories/external \"flarum.extensions['flamarkt-core']['common']['pages/AbstractShowPage']\"","webpack://@flamarkt/categories/external \"flarum.extensions['flamarkt-core']['backoffice']['pages/ProductShowPage']\"","webpack://@flamarkt/categories/external \"flarum.extensions['flamarkt-core']['backoffice']['components/ProductList']\"","webpack://@flamarkt/categories/external \"flarum.extensions['flamarkt-core']['backoffice']['components/BackofficeNav']\"","webpack://@flamarkt/categories/external \"flarum.extensions['flamarkt-core']['common']['components/ActiveLinkButton']\"","webpack://@flamarkt/categories/external \"flarum.extensions['flamarkt-core']['common']['states/AbstractListState']\"","webpack://@flamarkt/categories/external \"flarum.extensions['flamarkt-core']['backoffice']['components/AbstractList']\"","webpack://@flamarkt/categories/external \"flarum.extensions['flamarkt-core']['backoffice']['components/SubmitButton']\"","webpack://@flamarkt/categories/external \"flarum.extensions['flamarkt-core']['backoffice']['components/SoftDeleteButton']\"","webpack://@flamarkt/categories/external \"flarum.extensions['flamarkt-core']['backoffice']['components/PermanentDeleteButton']\"","webpack://@flamarkt/categories/external \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@flamarkt/categories/external \"flarum.core.compat['common/utils/ItemList']\"","webpack://@flamarkt/categories/external \"flarum.extensions['flamarkt-core']['backoffice']['components/AbstractRelationshipSelect']\"","webpack://@flamarkt/categories/external \"flarum.core.compat['common/helpers/highlight']\"","webpack://@flamarkt/categories/./src/backoffice/states/CategoryListState.js","webpack://@flamarkt/categories/./src/backoffice/components/CategoryList.ts","webpack://@flamarkt/categories/./src/backoffice/pages/CategoryIndexPage.ts","webpack://@flamarkt/categories/./src/backoffice/components/CategoryRelationshipSelect.ts","webpack://@flamarkt/categories/./src/backoffice/pages/CategoryShowPage.ts","webpack://@flamarkt/categories/./src/backoffice/index.js","webpack://@flamarkt/categories/./src/backoffice/extendProductIndex.ts","webpack://@flamarkt/categories/./src/backoffice/extendProductShow.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_setPrototypeOf","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","constructor","flarum","core","compat","Category","slug","Model","attribute","title","description","productCount","isHidden","parent","hasOne","apiEndpoint","this","exists","data","id","extensions","CategoryListState","type","AbstractListState","CategoryList","head","columns","add","category","Link","href","app","route","actions","LinkButton","component","className","icon","AbstractList","CategoryIndexPage","state","oninit","vnode","refresh","view","Page","CategoryRelationshipSelect","resultsCache","Map","search","query","toLowerCase","store","find","filter","q","page","limit","then","results","set","redraw","Promise","resolve","item","highlight","AbstractRelationshipSelect","CategoryShowPage","saving","dirty","newRecord","createRecord","findType","show","setTitle","setTitleCount","onsubmit","fields","toArray","LoadingIndicator","ItemList","relationship","onchange","oninput","event","target","SubmitButton","loading","SoftDeleteButton","model","PermanentDeleteButton","afterdelete","relationships","preventDefault","save","error","AbstractShowPage","initializers","models","categories","hasMany","routes","path","extend","BackofficeNav","items","ActiveLinkButton","activeRoutes","translator","trans","ProductList","product","map","join","ProductShowPage","returnValue"],"mappings":"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","file":"backoffice.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 26);\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/components/LinkButton'];","import Model from 'flarum/common/Model';\n\nexport default class Category extends Model {\n    slug = Model.attribute('slug');\n    title = Model.attribute('title');\n    description = Model.attribute('description');\n    productCount = Model.attribute('productCount');\n    isHidden = Model.attribute('isHidden');\n\n    parent = Model.hasOne('parent');\n\n    apiEndpoint() {\n        return '/flamarkt/categories' + (this.exists ? '/' + this.data.id : '');\n    }\n}\n","module.exports = flarum.core.compat['common/components/Page'];","module.exports = flarum.core.compat['common/components/Link'];","module.exports = flarum.extensions['flamarkt-core']['common']['pages/AbstractShowPage'];","module.exports = flarum.extensions['flamarkt-core']['backoffice']['pages/ProductShowPage'];","module.exports = flarum.extensions['flamarkt-core']['backoffice']['components/ProductList'];","module.exports = flarum.extensions['flamarkt-core']['backoffice']['components/BackofficeNav'];","module.exports = flarum.extensions['flamarkt-core']['common']['components/ActiveLinkButton'];","module.exports = flarum.extensions['flamarkt-core']['common']['states/AbstractListState'];","module.exports = flarum.extensions['flamarkt-core']['backoffice']['components/AbstractList'];","module.exports = flarum.extensions['flamarkt-core']['backoffice']['components/SubmitButton'];","module.exports = flarum.extensions['flamarkt-core']['backoffice']['components/SoftDeleteButton'];","module.exports = flarum.extensions['flamarkt-core']['backoffice']['components/PermanentDeleteButton'];","module.exports = flarum.core.compat['common/components/LoadingIndicator'];","module.exports = flarum.core.compat['common/utils/ItemList'];","module.exports = flarum.extensions['flamarkt-core']['backoffice']['components/AbstractRelationshipSelect'];","module.exports = flarum.core.compat['common/helpers/highlight'];","import AbstractListState from 'flamarkt/core/common/states/AbstractListState';\n\nexport default class CategoryListState extends AbstractListState {\n    type() {\n        return 'flamarkt/categories';\n    }\n}\n","import AbstractList from 'flamarkt/core/backoffice/components/AbstractList';\nimport Link from 'flarum/common/components/Link';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport Category from '../../common/models/Category';\n\nexport default class CategoryList extends AbstractList {\n    head() {\n        const columns = super.head();\n\n        columns.add('parent', m('th', 'Parent'));\n        columns.add('title', m('th', 'Title'));//TODO\n        columns.add('productCount', m('th', 'Products'));\n\n        return columns;\n    }\n\n    columns(category: Category) {\n        const columns = super.columns(category);\n\n        const parent = category.parent();\n\n        columns.add('parent', m('td', parent ? m(Link, {\n            href: app.route('categories.show', {\n                id: parent.id(),\n            }),\n        }, parent.title()) : m('em', 'Root')));\n        columns.add('title', m('td', category.title()));\n        columns.add('productCount', m('td', category.productCount()));\n\n        return columns;\n    }\n\n    actions(category: Category) {\n        const actions = super.actions(category);\n\n        actions.add('edit', LinkButton.component({\n            className: 'Button Button--icon',\n            icon: 'fas fa-pen',\n            href: app.route('categories.show', {\n                id: category.id(),\n            }),\n        }));\n\n        return actions;\n    }\n}\n","import {Vnode} from 'mithril';\nimport Page from 'flarum/common/components/Page';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport CategoryListState from '../states/CategoryListState';\nimport CategoryList from '../components/CategoryList';\n\nexport default class CategoryIndexPage extends Page {\n    state!: CategoryListState;\n\n    oninit(vnode: Vnode) {\n        super.oninit(vnode);\n\n        this.state = new CategoryListState();\n        this.state.refresh();\n    }\n\n    view() {\n        return m('.ProductIndexPage', m('.container', [\n            m('.Form-group', [\n                LinkButton.component({\n                    className: 'Button',\n                    href: app.route('categories.show', {\n                        id: 'new',\n                    }),\n                }, 'New category' /* TODO */),\n            ]),\n            m(CategoryList, {\n                state: this.state,\n            }),\n        ]));\n    }\n}\n","import AbstractRelationshipSelect from 'flamarkt/core/backoffice/components/AbstractRelationshipSelect';\nimport highlight from 'flarum/common/helpers/highlight';\nimport Category from '../../common/models/Category';\n\nexport default class CategoryRelationshipSelect extends AbstractRelationshipSelect<Category> {\n    protected resultsCache = new Map<string, Category[]>();\n\n    search(query: string) {\n        if (!query) {\n            m.redraw();\n            return Promise.resolve();\n        }\n\n        query = query.toLowerCase();\n\n        return app.store\n            .find('flamarkt/categories', {\n                filter: {q: query},\n                page: {limit: 5},\n            })\n            .then((results) => {\n                this.resultsCache.set(query, results);\n                m.redraw();\n            });\n    }\n\n    results(query: string) {\n        if (!query) {\n            return [];\n        }\n\n        query = query.toLowerCase();\n\n        const results = this.resultsCache.get(query);\n\n        // Indicates still loading\n        if (typeof results === 'undefined') {\n            return null;\n        }\n\n        return results || [];\n    }\n\n    item(category: Category, query?: string) {\n        return [\n            query ? highlight(category.title(), query) : category.title(),\n        ];\n    }\n}\n","import AbstractShowPage from 'flamarkt/core/common/pages/AbstractShowPage';\nimport SubmitButton from 'flamarkt/core/backoffice/components/SubmitButton';\nimport SoftDeleteButton from 'flamarkt/core/backoffice/components/SoftDeleteButton';\nimport PermanentDeleteButton from 'flamarkt/core/backoffice/components/PermanentDeleteButton';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Category from '../../common/models/Category';\nimport CategoryRelationshipSelect from '../components/CategoryRelationshipSelect';\n\nexport default class CategoryShowPage extends AbstractShowPage {\n    category: Category | null = null;\n    saving: boolean = false;\n    dirty: boolean = false;\n    parent: Category | null = null;\n    slug: string = '';\n    title: string = '';\n    description: string = '';\n\n    newRecord() {\n        return app.store.createRecord('flamarkt-categories');\n    }\n\n    findType() {\n        return 'flamarkt/categories';\n    }\n\n    show(category: Category) {\n        this.category = category;\n        this.parent = category.parent() || null;\n        this.slug = category.slug() || '';\n        this.title = category.title() || '';\n        this.description = category.description() || '';\n\n        app.setTitle(category.title());\n        app.setTitleCount(0);\n    }\n\n    view() {\n        if (!this.category) {\n            return LoadingIndicator.component();\n        }\n\n        return m('form.CategoryShowPage', {\n            onsubmit: this.onsubmit.bind(this),\n        }, m('.container.container--narrow', this.fields().toArray()));\n    }\n\n    fields(): ItemList {\n        const fields = new ItemList();\n\n        fields.add('parent', m('.Form-group', [\n            m('label', 'Parent'),\n            m(CategoryRelationshipSelect, {\n                relationship: this.parent,\n                onchange: category => {\n                    this.parent = category;\n                    this.dirty = true;\n                },\n                hasOne: true,\n            }),\n        ]), 20);\n\n        fields.add('slug', m('.Form-group', [\n            m('label', 'Slug'),\n            m('input.FormControl', {\n                type: 'text',\n                value: this.slug,\n                oninput: (event: Event) => {\n                    this.slug = (event.target as HTMLInputElement).value;\n                    this.dirty = true;\n                },\n            }),\n        ]), 20);\n\n        fields.add('title', m('.Form-group', [\n            m('label', 'Title'),\n            m('input.FormControl', {\n                type: 'text',\n                value: this.title,\n                oninput: (event: Event) => {\n                    this.title = (event.target as HTMLInputElement).value;\n                    this.dirty = true;\n                },\n            }),\n        ]), 20);\n\n        fields.add('description', m('.Form-group', [\n            m('label', 'Description'),\n            m('textarea.FormControl', {\n                value: this.description,\n                oninput: (event: Event) => {\n                    this.description = (event.target as HTMLInputElement).value;\n                    this.dirty = true;\n                },\n            }),\n        ]), 10);\n\n        fields.add('submit', m('.Form-group', [\n            SubmitButton.component({\n                loading: this.saving,\n                dirty: this.dirty,\n                exists: this.category!.exists,\n            }),\n            ' ',\n            SoftDeleteButton.component({\n                model: this.category,\n            }),\n            ' ',\n            PermanentDeleteButton.component({\n                model: this.category,\n                afterdelete() {\n                    m.route.set(app.route('categories.index'));\n                },\n            }),\n        ]));\n\n        return fields;\n    }\n\n    data() {\n        return {\n            slug: this.slug,\n            title: this.title,\n            description: this.description,\n            relationships: {\n                parent: this.parent,\n            },\n        };\n    }\n\n    onsubmit(event: Event) {\n        event.preventDefault();\n\n        this.saving = true;\n\n        this.category!.save(this.data()).then(category => {\n            this.category = category;\n\n            this.saving = false;\n            this.dirty = false;\n            m.redraw();\n\n            m.route.set(app.route.category(category));\n        }).catch(error => {\n            this.saving = false;\n            m.redraw();\n        });\n    }\n}\n","import {extend} from 'flarum/common/extend';\nimport BackofficeNav from 'flamarkt/core/backoffice/components/BackofficeNav';\nimport ActiveLinkButton from 'flamarkt/core/common/components/ActiveLinkButton';\nimport Model from 'flarum/common/Model';\nimport Category from '../common/models/Category';\nimport CategoryIndexPage from './pages/CategoryIndexPage';\nimport CategoryShowPage from './pages/CategoryShowPage';\nimport extendProductIndex from './extendProductIndex';\nimport extendProductShow from './extendProductShow';\n\napp.initializers.add('flamarkt-categories', () => {\n    app.store.models['flamarkt-categories'] = Category;\n    app.store.models['flamarkt-products'].prototype.categories = Model.hasMany('categories');\n\n    app.routes['categories.index'] = {\n        path: '/categories',\n        component: CategoryIndexPage,\n    };\n    app.routes['categories.show'] = {\n        path: '/categories/:id',\n        component: CategoryShowPage,\n    };\n\n    app.route.category = category => {\n        return app.route('categories.show', {\n            id: category.id(),\n        });\n    };\n\n    extend(BackofficeNav.prototype, 'items', function (items) {\n        items.add('categories', ActiveLinkButton.component({\n            href: app.route('categories.index'),\n            icon: 'fas fa-th-list',\n            activeRoutes: [\n                'categories.*',\n            ],\n        }, app.translator.trans('flamarkt-categories.backoffice.nav.categories')));\n    });\n\n    extendProductIndex();\n    extendProductShow();\n});\n","import {extend} from 'flarum/common/extend';\nimport ProductList from 'flamarkt/core/backoffice/components/ProductList';\nimport ItemList from 'flarum/common/utils/ItemList';\n\nexport default function () {\n    extend(ProductList.prototype, 'head', function (columns: ItemList) {\n        columns.add('categories', m('th', app.translator.trans('flamarkt-categories.backoffice.products.head.category')), 20);\n    });\n\n    extend(ProductList.prototype, 'columns', function (columns: ItemList, product) {\n        columns.add('categories', m('td', (product.categories() || []).map(category => category.title()).join(', ')), 20);\n    });\n}\n","import {extend} from 'flarum/common/extend';\nimport ProductShowPage from 'flamarkt/core/backoffice/pages/ProductShowPage';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport CategoryRelationshipSelect from './components/CategoryRelationshipSelect';\n\nexport default function () {\n    extend(ProductShowPage.prototype, 'oninit', function (this: ProductShowPage) {\n        this.categories = [];\n    });\n\n    extend(ProductShowPage.prototype, 'show', function (this: ProductShowPage, returnValue: any, product) {\n        this.categories = product.categories() || [];\n    });\n\n    extend(ProductShowPage.prototype, 'fields', function (this: ProductShowPage, fields: ItemList) {\n        fields.add('categories', m('.Form-group', [\n            m('label', 'Categories'),\n            m(CategoryRelationshipSelect, {\n                relationship: this.categories,\n                onchange: categories => {\n                    this.categories = categories;\n                    this.dirty = true;\n                },\n            }),\n        ]), 100);\n    });\n\n    extend(ProductShowPage.prototype, 'data', function (this: ProductShowPage, data: any) {\n        data.relationships = data.relationships || {};\n        data.relationships.categories = this.categories;\n    });\n}\n"],"sourceRoot":""}