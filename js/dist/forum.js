(()=>{var t={n:r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return t.d(e,{a:e}),e},d:(r,e)=>{for(var o in e)t.o(e,o)&&!t.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:e[o]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};(()=>{"use strict";t.r(r);const e=flarum.core.compat["forum/app"];var o=t.n(e);const a=flarum.core.compat["common/extend"],n=flarum.core.compat["common/components/LinkButton"];var c=t.n(n);const i=flarum.core.compat["common/components/Separator"];var s=t.n(i);const u=flarum.core.compat["forum/components/IndexPage"];var l=t.n(u);function f(t,r){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},f(t,r)}function p(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,f(t,r)}const g=flarum.core.compat["common/Model"];var d=t.n(g),y=function(t){function r(){for(var r,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(r=t.call.apply(t,[this].concat(o))||this).slug=d().attribute("slug"),r.title=d().attribute("title"),r.description=d().attribute("description"),r.productCount=d().attribute("productCount"),r.isHidden=d().attribute("isHidden"),r.parent=d().hasOne("parent"),r}return p(r,t),r.prototype.apiEndpoint=function(){return"/flamarkt/categories"+(this.exists?"/"+this.data.id:"")},r}(d());const h=flarum.core.compat["common/components/Page"];var v=t.n(h);const b=flarum.core.compat["common/utils/extractText"];var k=t.n(b);const S=((flarum.extensions["flamarkt-core"]||{}).forum||{})["layouts/AbstractShopLayout"];var x=t.n(S);const P=flarum.core.compat["common/components/Link"];var w=t.n(P),O=function(t){function r(){return t.apply(this,arguments)||this}p(r,t);var e=r.prototype;return e.title=function(){return o().translator.trans("flamarkt-categories.forum.categories.headingTitle")},e.content=function(){var t=o().store.all("flamarkt-categories");return m("ul",t.map((function(t){return m("li",w().component({href:o().route.category(t)},t.title()))})))},r}(x()),T=function(t){function r(){return t.apply(this,arguments)||this}p(r,t);var e=r.prototype;return e.oninit=function(r){t.prototype.oninit.call(this,r),o().setTitle(k()(o().translator.trans("flamarkt-categories.forum.categories.browserTitle"))),o().setTitleCount(0)},e.view=function(){return O.component()},r}(v());const _=((flarum.extensions["flamarkt-backoffice"]||{}).common||{})["pages/AbstractShowPage"];var j=t.n(_);const C=((flarum.extensions["flamarkt-core"]||{}).common||{})["states/ProductListState"];var L=t.n(C);const A=((flarum.extensions["flamarkt-core"]||{}).forum||{})["layouts/ProductIndexLayout"];var I=function(t){function r(){for(var r,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(r=t.call.apply(t,[this].concat(o))||this).attrs=void 0,r}p(r,t);var e=r.prototype;return e.breadcrumbItems=function(){var r=t.prototype.breadcrumbItems.call(this);return r.add("categories",c().component({href:o().route("flamarkt.categories.index")},o().translator.trans("flamarkt-categories.forum.breadcrumb.categories"))),r},e.title=function(){return this.attrs.category?this.attrs.category.title():o().translator.trans("flamarkt-categories.forum.category.titleWhileLoading")},e.currentPageHref=function(){return""},r}(t.n(A)()),M=function(t){function r(){for(var r,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(r=t.call.apply(t,[this].concat(o))||this).category=null,r.listState=void 0,r}p(r,t);var e=r.prototype;return e.oninit=function(r){t.prototype.oninit.call(this,r),this.listState=this.initState()},e.initState=function(){var t=m.route.param();return new(L())({sort:t.sort})},e.findType=function(){return"flamarkt/categories"},e.requestParams=function(){var r=t.prototype.requestParams.call(this);return r.bySlug=!0,r},e.show=function(t){this.category=t,o().setTitle(t.title()),o().setTitleCount(0),this.listState.params.filter={category:t.slug()},this.listState.refresh()},e.view=function(){return I.component({category:this.category,state:this.listState})},r}(j());o().initializers.add("flamarkt-categories",(function(){o().store.models["flamarkt-categories"]=y,o().routes["flamarkt.categories.index"]={path:"/categories",component:T},o().routes["flamarkt.categories.show"]={path:"/categories/:id",component:M},o().route.category=function(t){return o().route("flamarkt.categories.show",{id:t.slug()})},(0,a.extend)(l().prototype,"navItems",(function(t){t.add("flamarkt-categories",c().component({icon:"fas fa-th-large",href:o().route("flamarkt.categories.index")},o().translator.trans("flamarkt-categories.forum.nav.allCategories")),-10),o().current.matches(T)||(t.add("separator",s().component(),-12),o().store.all("flamarkt-categories").forEach((function(r){t.add("flamarkt-category"+r.id(),c().component({icon:"fas fa-tag",href:o().route.category(r)},[r.title(),m("span.Button-badge",r.productCount())]),-14)})))}))}))})(),module.exports=r})();
//# sourceMappingURL=forum.js.map